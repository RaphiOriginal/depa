package ch.fhnw.depa.colorpicker.gui;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BoxLayout;
import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollBar;
import javax.swing.JTextField;

public class Window extends JFrame{
	
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	
	
	//Attributes
	private int red = 0;
	private int green = 0;
	private int blue = 0;
	
	private Color usedColor = new Color(red, green, blue);
	
	private Color cred;
	private Color cgreen;
	private Color cblue;
	private Color cyellow;
	private Color ccyan;
	private Color corange;
	private Color cblack;
	
	//Layouts
	GridLayout mainLayout;
	BoxLayout scrLayout;
	GridLayout fieldsLayout;
	BoxLayout radioLayout;
	BorderLayout buttonsLayout;
	BoxLayout brightnessLayout;
	
	//Scrollbars
	JScrollBar scrRed;
	JScrollBar scrGreen;
	JScrollBar scrBlue;
	
	//Fields
	JTextField rgbRed;
	JTextField rgbGreen;
	JTextField rgbBlue;
	JTextField hexRed;
	JTextField hexGreen;
	JTextField hexBlue;
	
	//Buttons
	JButton darker;
	JButton brighter;
	
	//Panels
	JPanel scrollBar;
	JPanel fields;
	JPanel color;
	JPanel buttons;
	JPanel radio;
	JPanel brightness;
	
	//Radiobuttons
	JRadioButton radRed;
	JRadioButton radBlue;
	JRadioButton radGreen;
	JRadioButton radYellow;
	JRadioButton radCyan;
	JRadioButton radOrange;
	JRadioButton radBlack;
	
	//Buttongroupe
	ButtonGroup radioGroup;
	
	//Menu
	JMenuBar menuBar;
	JMenu file;
	JMenu attributes;
	
	public Window(){
		setDefaultCloseOperation(EXIT_ON_CLOSE);
		
		//set Layout
		mainLayout = new GridLayout(2,2);
		setLayout(mainLayout);
		
		//setup menubar
		menuBar = new JMenuBar();
		setJMenuBar(menuBar);
		
		//setup menu
		file = new JMenu("File");
		attributes = new JMenu("Attributes");
		menuBar.add(file);
		menuBar.add(attributes);
		
		//setup sliders
		scrollBar = new JPanel();
		scrLayout = new BoxLayout(scrollBar, BoxLayout.Y_AXIS);
		scrollBar.setLayout(scrLayout);
		
		scrRed = new JScrollBar(JScrollBar.HORIZONTAL, red, 1, 0, 255);
		scrGreen = new JScrollBar(JScrollBar.HORIZONTAL, green, 1, 0, 255);
		scrBlue = new JScrollBar(JScrollBar.HORIZONTAL, blue, 1, 0, 255);
		
		scrRed.setBackground(new Color(255, 0, 0));
		scrGreen.setBackground(new Color(0, 255, 0));
		scrBlue.setBackground(new Color(0, 0, 255));
		
		scrollBar.add(scrRed);
		scrollBar.add(scrGreen);
		scrollBar.add(scrBlue);
		
		add(scrollBar);
		
		//setup Fields
		fields = new JPanel();
		fieldsLayout = new GridLayout(3, 2);
		fields.setLayout(fieldsLayout);
		
		rgbRed = new JTextField();
		rgbGreen = new JTextField();
		rgbBlue = new JTextField();
		
		hexRed = new JTextField();
		hexGreen = new JTextField();
		hexBlue = new JTextField();
		
		hexRed.setEditable(false);
		hexGreen.setEditable(false);
		hexBlue.setEditable(false);
		
		fields.add(rgbRed);
		fields.add(hexRed);
		fields.add(rgbGreen);
		fields.add(hexGreen);
		fields.add(rgbBlue);
		fields.add(hexBlue);
		
		add(fields, BorderLayout.EAST);
		
		//setup colorpanel
		color = new JPanel();
		color.setPreferredSize(new Dimension(150, 150));
		updatePanel();
		
		add(color);
		
		//setup buttons
		buttons = new JPanel();
		radio = new JPanel();
		brightness = new JPanel();
		
		//radio buttons
		radioLayout = new BoxLayout(radio, BoxLayout.Y_AXIS);
		radio.setLayout(radioLayout);
		buttonsLayout = new BorderLayout();
		buttons.setLayout(buttonsLayout);
		brightnessLayout = new BoxLayout(brightness, BoxLayout.Y_AXIS);
		brightness.setLayout(brightnessLayout);
		
		radRed = new JRadioButton("red");
		radBlue = new JRadioButton("blue");
		radGreen = new JRadioButton("green");
		radYellow = new JRadioButton("yellow");
		radCyan = new JRadioButton("cyan");
		radOrange = new JRadioButton("orange");
		radBlack = new JRadioButton("black");
		
		radioGroup = new ButtonGroup();
		radioGroup.add(radRed);
		radioGroup.add(radBlue);
		radioGroup.add(radGreen);
		radioGroup.add(radYellow);
		radioGroup.add(radCyan);
		radioGroup.add(radOrange);
		radioGroup.add(radBlack);
		
		radio.add(radRed);
		radio.add(radBlue);
		radio.add(radGreen);
		radio.add(radYellow);
		radio.add(radCyan);
		radio.add(radOrange);
		radio.add(radBlack);
		
		buttons.add(radio, BorderLayout.WEST);
		
		//brightness buttons
		darker = new JButton("Darker");
		brighter = new JButton("Brighter");
		
		brightness.add(darker);
		brightness.add(brighter);
		
		buttons.add(brightness,  BorderLayout.EAST);
		
		add(buttons);
		
		//colors
		cred = new Color(255, 0, 0);
		cgreen = new Color(0, 255, 0);
		cblue = new Color(0, 0, 255);
		cyellow = new Color(255, 255, 0);
		ccyan = new Color(0, 255, 255);
		corange = new Color(255, 165, 0);
		cblack = new Color(0, 0, 0);
		
		//ActionListener
		radRed.addActionListener(new ActionListener() {
			@Override
			public void actionPerformed(ActionEvent e) {
				updateColor(cred);
				
			}
		});
		
		//set visible
		pack();
		setVisible(true);
	}
	
	private void updateRed(int _red){
		//TODO update all red fields
		red = _red;
	}
	private void updateGreen(int _green){
		//TODO update all green fields
		green = _green;
	}
	private void updateBlue(int _blue){
		//TODO update all  blue fields
		blue = _blue;
	}
	private void updateColor(int _red, int _green, int _blue){
		red = _red;
		green = _green;
		blue = _blue;
		usedColor = new Color(red, green, blue);
		checkRadio();
	}
	private void updateColor(Color c){
		usedColor = c;
	}
	private void checkRadio(){
		//TODO chose right radio buttons
		usedColor = new Color(red, green, blue);
		if(checkColor(cred)){
			unselectAll();
			radRed.setSelected(true);
		} else if(checkColor(cgreen)){
			unselectAll();
			radGreen.setSelected(true);
		} else if(checkColor(cblue)){
			unselectAll();
			radBlue.setSelected(true);
		} else if(checkColor(cyellow)){
			unselectAll();
			radYellow.setSelected(true);
		} else if(checkColor(ccyan)){
			unselectAll();
			radCyan.setSelected(true);
		} else if(checkColor(corange)){
			unselectAll();
			radOrange.setSelected(true);
		} else if(checkColor(cblack)){
			unselectAll();
			radBlack.setSelected(true);
		} else {
			unselectAll();
		}
	}
	private void updatePanel(){
		color.setBackground(usedColor);
	}
	private boolean checkColor(Color c){
		return usedColor.equals(c);
	}
	private void unselectAll(){
		radRed.setSelected(false);
		radGreen.setSelected(false);
		radBlue.setSelected(false);
		radYellow.setSelected(false);
		radCyan.setSelected(false);
		radOrange.setSelected(false);
		radBlack.setSelected(false);
	}
}
